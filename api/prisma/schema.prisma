generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  username  String   @unique
  email     String   @unique
  password  String
  avatar    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  teams     Team[]   @relation("team_creator")
}

model Admin {
  id            String   @id @default(uuid())
  username      String   @unique
  password      String
  role          String   @default("admin")
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  games         Game[]   @relation("game_creator")
  approvedTeams Team[]   @relation("approved_teams")
}

model Game {
  id          String   @id @default(uuid())
  category    String
  name        String
  description String
  image       String?  @default("/default-game-image.jpg")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  creator     Admin    @relation("game_creator", fields: [creatorId], references: [id])
  creatorId   String
}

model Team {
  id                    String   @id @default(uuid())
  name                  String
  numberOfPlayers       Int
  description           String
  availableDaysAndTimes String
  category              String
  city                  String
  img                   String
  approved              Boolean  @default(false)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  approvedBy            Admin?   @relation("approved_teams", fields: [approvedById], references: [id])
  approvedById          String?

  creator               User     @relation("team_creator", fields: [creatorId], references: [id])
  creatorId             String
}
